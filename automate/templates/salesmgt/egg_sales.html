{% extends "layout/layout2.html" %}
{% from "macros/sidenav.html" import sales with context %}

{% block sidenav %}
    {{ sales() }}
{% endblock sidenav %}

{% block content %}
<div class="col-md-10 offset-md-2 mt-3">

    <!-- Content -->
    <div class="content">

        <!-- Alert -->
        {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
        {% for category, message in messages %}
        <div class="alert alert-{{category}} z-depth-1 py-2 mb-2">
            <span class="font-small">{{message}}</span>
            <a href="javascript:void(0)" data-dismiss="alert" class="close" style="font-size:0.9375rem;">&times;</a>
        </div>
        {% endfor %}
        {% endif %}
        {% endwith %}
        <!-- Alert -->

        <!-- Welcome Row -->
        <div class="col-md-12 alert white mb-3 py-1 z-depth-1 d-flex justify-content-between align-items-center
            ">
            <div class="title mt-2">
                <h6 class="teal-text" style="font-size: 0.875rem">Welcome to Sales Portal</h6>
            </div>
            <div class="datetime d-flex justify-content-around align-items-center flex-row">
                <!-- {{ date.today() }} -->
                <div class="row1">
                    <div class="day teal-text" style="font-size: 1.4375rem">{{ date.day }}</div>
                </div>
                &nbsp;
                <div class="row2 blue-grey-text" style="font-size: 0.8125rem">
                    <div class="month">{{ date.strftime("%b") }}.</div>
                    <div class="year">{{ date.year }}</div>
                </div>
                &nbsp;
                <div class="row3 font-small blue-grey-text" style="font-size: 0.8125rem">
                    <div class="time">{{ date.strftime("%H:%M:%S") }}</div>
                </div>
            </div>
        </div>
        <!-- Welcome Row -->

        <!-- First Row -->
        <div class="col-md-12 white py-3 z-depth-1 d-flex justify-content-between align-items-center">
            <div class="title">
                <h5 class="teal-text" style="font-size: 0.9375rem">Egg Sales..</h5>
            </div>
            <div class="addcustomers wow fadeInLeft">
                <button class="btn btn-sm teal white-ic z-depth-1" data-toggle="modal"
                    data-target="#newSales" style="border-radius: 0.9375rem; font-size: 0.625rem"><i class="fas fa-plus"></i>
                    &nbsp;New
                    Sales</button>
            </div>
        </div>
        <!-- First Row -->

        <!-- Second Row -->
        <div class="col-md-12 white py-3 mt-3 mb-3 z-depth-1 third-box">

            <div class="column mb-3" style="border: 1px solid #20c997;">
                <!-- Inner Row 1 -->

                <div class="inner-row d-flex justify-content-between teal px-2 py-1">
                    <div class="item-title d-flex align-items-center">
                        <h6 class="white-text pt-2" style="font-size: 0.8125rem">Egg Sales Database (
                            {% if request.args.get('month') == None %}
                                {{ eggsale_month[-1] | numberMonth }}
                            {% else %}
                                {{ request.args.get('month') | numberMonth }}
                            {% endif %}
                        )</h6>
                    </div>

                    <!-- Egg Cost -->
                    <div class="eggcost">
                       <span style="font-size:0.625rem;"> <a href="javascript: void(0)" class="white-text border py-1 px-2 z-depth-1" style="border-radius:0.3125rem;" data-toggle="modal" id="costSettings" data-target="#eggCostModal"><i class="fas fa-cogs"></i> Egg Cost</a></span>
                    </div>
                </div>
                <!-- Inner Row 1 -->

                <!-- Inner Row 2 -->
                <div class="filter mt-2 px-2">
                    <div class="d-flex justify-content-between align-items-center flex-wrap">
                        <form action="" method='POST' class="form-inline">
                            <div class="d-flex justify-content-around align-items-center">
                                <label for="" class="teal-text" style="font-size:0.8125rem;">Filter By:</label>
                                &nbsp;
                                <input type="hidden" name="check" value="gobutton">
                                <!-- Month -->
                                <select name="month" id="" class="form-control blue-grey-text" style="font-size: 0.6875rem">
                                    <option value="" selected disabled style="font-size:0.6875rem">-- Month --</option>
                                    
                                    {% if eggsale_month %}
                                    {% for month in eggsale_month %}
                                        <option value="{{ month }}">&nbsp;&nbsp;{{ month | numberMonth }}</option>
                                    {% endfor %}
                                    {% else %}
                                    <option value="" disabled>&nbsp;&nbsp;No Month</option>
                                    {% endif %}
                                    
                                </select>
                                <!-- Month -->
                                &nbsp;
                                <!-- Year -->
                                <select name="year" id="" class="form-control blue-grey-text" style="font-size: 0.6875rem">
                                    <option value="" selected disabled style="font-size:0.6875rem">-- Year --</option>
                                
                                    {% if eggsale_year %}
                                    {% for year in eggsale_year %}
                                        <option value="{{ year }}">&nbsp;&nbsp;{{ year  }}</option>
                                    {% endfor %}
                                    {% else %}
                                    <option value="" disabled>&nbsp;&nbsp;No Year</option>
                                    {% endif %}
                                        
                                </select>
                                <!-- Year -->
                                &nbsp;
                                <!-- Go -->
                                <input type="submit" class="form-control teal white-ic w-auto"
                                    style="font-size:0.6875rem;" value="GO">
                            </div>
                        </form>
r
                        <!-- Egg Customers -->
                        <form action="" method="POST" class="form-inline">
                            <div class="d-flex justify-content-around">
                                <input type="hidden" name="check" value="egg-customers">
                                <select name="customer-filter" id="" class="form-control blue-grey-text" style="font-size: 0.6875rem">
                                    <option value="" disabled selected>-- Egg Customers --</option>
                                    {% if egg_customers %}
                                    {% for customer in egg_customers %}
                                    <option value="{{ customer.id }}">{{ customer.customer | wordSeparator }}</option>
                                    {% endfor %}
                                    {% else %}
                                    <option value="">-- No Customers --</option>
                                    {% endif %}
                                </select>
                                &nbsp;
                                <!-- Go -->
                                <input type="submit" class="form-control teal white-ic w-auto"
                                style="font-size:0.6875rem;" value="GO">
                            </div>
                        </form>
                        <!-- Egg Customers -->
                    </div>
                </div>
                <!-- Inner Row 2 -->

                <!-- Table Row -->
                <div class="px-2 mt-3">
                    <table class="table w-100 table-responsive table-hover table-responsive table-striped table-bordered" id="table"
                        style="overflow: auto;">
                        <thead class="teal-text grey lighten-2">
                            <th class="font-weight-bold" width="130px" style="min-width:100px; font-size: 0.6563rem">Date</th>
                            <th class="font-weight-bold" width="200px" style="min-width:160px; font-size: 0.6563rem">Customer</th>
                            <th class="font-weight-bold" width="90px" style="min-width:80px; font-size: 0.6563rem">Paid for</th>
                            <th class="font-weight-bold" width="80px" style="min-width:80px; font-size: 0.6563rem">Issued</th>
                            <th class="font-weight-bold" width="180px" style="min-width:140px; font-size: 0.6563rem">Cost Info</th>
                            <th class="font-weight-bold" width="180px" style="min-width:140px; font-size: 0.6563rem">Payment Info</th>
                            <th class="font-weight-bold" width="190px" style="min-width:140px; font-size: 0.6563rem">Remarks</th>
                            <th class="font-weight-bold" width="50px" style="min-width:50px; font-size: 0.6563rem">Update</th>
                        </thead>
                        <tbody>

                            <!-- Load Customers Details -->
                            {% if eggsales_list %}
                            {% for sales in eggsales_list.items %}
                            <tr>
                                <td style="font-size:0.7188rem;">{{ sales.date }}</td>
                                <td style="font-size:0.7188rem;">{{ sales.customer.customer | wordSeparator }}</td>
                                <td style="font-size:0.7188rem;">{{ sales.requested }}</td>
                                <td style="font-size:0.7188rem;">{{ sales.issued }}</td>
                                <td style="font-size:0.7188rem;">
                                    Egg-Cost info.. <a href="javascript: void(0)" class="green white-text px-2 py-1 cost-info" id="{{ sales.id }}" style="font-size: 0.6875rem; border-radius: 0.3125rem; cursor: pointer" data-toggle="modal" data-target="#showCostInfo">More</a>
                                </td>
                                <td style="font-size:0.7188rem;">
                                    Payment Details.. <a href="javascript: void(0)" class="red white-text px-2 py-1 payment-info" id="{{ sales.id }}" style="font-size: 0.6875rem; border-radius: 0.3125rem; cursor: pointer" data-toggle="modal" data-target="#showPaymentInfo">More</a>
                                </td>
                        
                                <td style="font-size:0.7188rem;">
                                    {% if sales.comment %}
                                    {{ sales.comment | truncate(length=25, killwords=True, end='...', leeway=None) }}
                                    {% else %}
                                        <span class="text-muted"> No Remark Here..</span>
                                    {% endif %}
                                    <a href="javascript: void(0)"><i class="fas fa-eye blue white-text p-1 rounded-circle remark-info" id="{{ sales.id }}" data-toggle="modal" data-target="#showRemark"></i></a> 
                                </td>
                                
                                <td  class="text-center">
                                    <a href="javascript: void(0)" class="blue-text px-2 py-1 update-info" id="{{ sales.id }}"
                                        style="font-size: 0.7188rem; cursor: pointer"
                                        data-toggle="modal" data-target="#editSales"><i class="fas fa-edit"></i></a>
                                </td>

                                {% if sales.debit > 0 %}
                                    <td class="d-none debit-present"></td>
                                {% else %}
                                    <td class="d-none"></td>
                                {% endif %}

                                {% if sales.credit > 0 %}
                                    <td class="d-none credit-present"></td>
                                {% else %}
                                    <td class="d-none"></td>
                                {% endif %}
                                
                            </tr>
                            {% endfor %}
                            {% else %}
                            <tr>
                                <td colspan="7" class="text-center teal-text">No data</td>
                            </tr>
                            {% endif %}
                        </tbody>
                    </table>

                    <!-- Pagination -->
                    {% if eggsales_list %}
                    <nav aria-label="Page navigation" class="d-flex justify-content-center">
                        <ul class="pagination">

                            {% if eggsales_list.has_prev %}
                                <li class="page-item">
                                    <a href="{{ url_for('sales.egg_sales', month=request.args.get('month'), year=request.args.get('year'), page=eggsales_list.prev_num) }}" class="page-link teal-text">
                                        <span aria-hidden="true">&laquo;</span>
                                        <span class="sr-only">Previous</span>
                                    </a>
                                </li>
                            {% else %}
                                <li class="page-item disabled">
                                    <a href="" class="page-link text-muted">
                                        <span aria-hidden="true">&laquo;</span>
                                        <span class="sr-only">Previous</span>
                                    </a>
                                </li>
                            {% endif %}

                           {% for page_num in eggsales_list.iter_pages()  %}
                           {% if page_num %}
                            {% if eggsales_list.page == page_num %}
                                <li class=" page-item" ><a href="{{ url_for('sales.egg_sales', month=request.args.get('month'), year=request.args.get('year'),  page=page_num) }}" class="page-link white-text border teal lighten-1 rounded-circle" style="font-size: 0.625rem">{{ page_num }}</a></li>
                                {% else %}
                                <li class=" page-item"><a href="{{ url_for('sales.egg_sales', month=request.args.get('month'), year=request.args.get('year'),  page=page_num) }}" class="page-link teal-text border rounded-circle" style="font-size: 0.625rem">{{ page_num }}</a></li>
                                {% endif %}
                            {% else %}
                            ...
                            {% endif %}
                            {% endfor %}


                            {% if eggsales_list.has_next %}
                            <li class="page-item">
                                <a href="{{ url_for('sales.egg_sales', month=request.args.get('month'), year=request.args.get('year'), page=eggstock_list.next_num) }}" class="page-link teal-text">
                                    <span aria-hidden="true">&raquo;</span>
                                    <span class="sr-only">Next</span>
                                </a>
                            </li>
                            {% else %}
                                <li class="page-item disabled">
                                    <a href="" class="page-link text-muted">
                                        <span aria-hidden="true">&raquo;</span>
                                        <span class="sr-only">Next</span>
                                    </a>
                                </li>
                            {% endif %}

                        </ul>
                    </nav>  
                    {% endif %}
                    <!-- Pagination -->

                </div>
                <!-- Table Row -->
            </div>

        </div>
        <!-- Second Row -->

       
    </div>
    <!-- Content -->

</div>
{% endblock content %}

{% block modal %}
<!-- New Egg Sales -->
<div class="container">
    <div class="row">
        <div class="col-md-10 offset-md-2">
            <div class="modal fade top" id="newSales" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
                aria-hidden="true" data-backdrop="true">
                <div class="modal-dialog modal-top modal-notify" role="document">
                    <div class="modal-content">
                        <div class="modal-header teal">
                            <div class="modal-title springWood h5-responsive"
                                style="font-size: 0.875rem">Egg Sales
                            </div>
                            <a href="#" class="close white-text font-small" data-dismiss="modal">&times;</a>
                        </div>
                        <div class="modal-body">

                            <form action="" method="POST" class="mt-2 newSales">
                                {{ form.csrf_token }}
                                <input type="hidden" name="check" value="new_egg_sales">

                                <!-- Cost Details -->
                                <div class="cost-details">
                                    <div class="d-flex justify-content-between teal-text mb-2 pb-1 border-bottom w-100">
                                        <div style="font-size:15px">Sales Cost Details</div>

                                        <div class="border rounded-circle" id="dropBox" style="height:1.75rem; min-width: 1.75rem; position: relative; cursor: pointer;">
                                            <i class="fas fa-caret-down font-small" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);"></i>
                                        </div>
                                    </div>

                                    <div class="dropbox-panel">
                                        <!-- Date -->
                                        <div class="form-group mt-1 d-flex justify-content-between align-items-center">
                                            <span class="teal-text font-small w-25">Date:</span>
                                            <input type="date" name="sales-date" id="" class="form-control" style="font-size:0.8438rem" required value={{ date.strftime('%Y-%m-%d') }}>
                                        </div>
    
                                        <!-- Customer -->
                                        <div class="form-group d-flex justify-content-between align-items-center">
                                            <span class="teal-text font-small w-25">Customer:</span>
                                            <select name="sales-customer-name" id="" class="custom-select" style="font-size:0.8438rem">
                                                <option value="" disabled selected>Select Customer</option>
                                                {% if egg_customers %}
                                                {% for customer in egg_customers %}
                                                <option value="{{ customer.id }}">{{ customer.customer | wordSeparator }}</option>
                                                {% endfor %}
                                                {% else %}
                                                <option value="">-- No Customers --</option>
                                                {% endif %}
                                            </select>
                                        </div>
                                       
                                        <!-- Quantity Supplied -->
                                        <div class="form-group d-flex justify-content-between align-items-center">
                                            <span class="teal-text font-small">Quantity Taken:</span>
                                            <input type="number" name="sales-qty-paid" id="qtyPaidFor" class="form-control" style="font-size: 0.8438rem;" required value=0>
                                        </div>  
                                    </div>
                                
                                    <!-- Egg Details and Allocation -->
                                    <div>
                                        <span class="red-text" style="font-size:0.8125rem; margin-top: -5px">Egg Details and Pen Allocation</span>

                                        {% if eggcost %}
                                        {% for egg in eggcost %}
                                        <!-- {{ egg.sales_type}} -->
                                        
                                        <div class="mt-2 mb-3 d-flex justify-content-between w-100">

                                            <div class="form d-flex justify-content-between align-items-center pr-2">
                                                <span class="teal-text d-inline-block w-25 mr-2" style="font-size:0.8125rem;">{{ egg.sales_type }}:</span>

                                                <!-- Input Form For {{ egg.sales_type }} -->
                                                <input type="number" name="{{ egg.sales_type }}" id="{{ egg.sales_type }}Qty" class="form-control" style="font-size: 0.8438rem;" required value=0>
                                            </div>

                                            <div class="form d-flex justify-content-between align-items-center">
                                                <span class="teal-text w-25" style="font-size:0.8125rem;">Cost:</span>
                    
                                                <!-- Input Form For {{ egg.sales_type }} -->
                                                <input type="number" name="{{ egg.sales_type }}" id="{{ egg.sales_type }}Cost" class="form-control" style="font-size: 0.8438rem;" required value={{egg.cost|numberFormat}}>
                                            </div>

                                        </div>

                                        {% endfor %}
                                        {% endif %}
                                       
                                    </div>


                                     <!-- Next Button -->
                                    <button class="btn btn-sm btn-outline-teal rounded-10 white-text mt-2 next-button" id="nextButton">Next <i class="fas fa-angle-double-right"></i> </button>
                                </div>

                                <!-- Payment Details -->
                                <div class="payment-details">

                                    <div class="teal-text mb-2 pb-1 border-bottom w-100" style="font-size:15px">Sales Payment Details</div>

                                    <span class="font-small text-muted">Total Purchase Cost: &#8358;<span class="total-purchase">0</span> </span>
                                   
                                    <!-- Bank -->
                                    <div class="form-group mt-3">
                                        <span class="teal-text font-small">Bank Payment:</span>
                                        <input type="number" name="sales-bank-payment" id="bankPayment" class="form-control" step="0.01" style="font-size: 0.8438rem;" required value=0>
                                    </div>  

                                    <!-- Cash -->
                                    <div class="form-group">
                                        <span class="teal-text font-small">Cash Payment</span>
                                        <input type="number" name="sales-cash-payment" id="cashPayment" class="form-control" style="font-size: 0.8438rem;" step="0.01" required value="0">
                                    </div>

                                     <!-- Credit -->
                                     <div class="form-group">
                                        <span class="teal-text font-small">Credit Purchase</span>
                                        <input type="number" name="sales-credit-purchase" id="creditPurchase" class="form-control" style="font-size: 0.8438rem;" step="0.01" required value="0">
                                    </div>

                                     <!-- Outstanding -->
                                     <div class="form-group" id="outstandingSection">
                                        <span class="teal-text font-small">Outstanding Balance</span>
                                        <input type="number" name="sales-outstanding-balance" id="outstandingBalance" class="form-control" style="font-size: 0.8438rem;" step="0.01" required value="0">
                                    </div>

                                    <!-- Refund -->
                                    <div class="form-group refund-section" id="refundSection">
                                        <div class="d-flex justify-content-between align-items-center">
                                            <span class="teal-text font-small w-75">Want a refund?</span>
                                            <select name="refund" id="refund" class="custom-select" style="font-size: 0.75rem;">
                                                <option value="" selected>-- Select Refund Response --</option>
                                                <option value="No">No</option>
                                                <option value="Yes">Yes</option>
                                            </select>
                                        </div>
                                    </div>

                                     <!-- Prev Button -->
                                    <button class="btn btn-sm btn-outline-teal rounded-10 white-text" id="prevButton"> <i class="fas fa-angle-double-left"></i> Prev</button>

                                    <!-- Submit Button -->
                                    <button type="submit" class="btn btn-sm teal white-text float-right" id="submitButton">Submit <i class="fas fa-paper-plane"></i> </button>
                                    
                                </div>

                            </form>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- New Egg Sales -->


<!-- Show Remark Modal -->
<div class="container">
    <div class="row">
        <div class="col-md-10 offset-md-2">
            <div class="modal fade top" id="showRemark" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
                aria-hidden="true" data-backdrop="true">
                <div class="modal-dialog modal-top modal-notify" role="document">
                    <div class="modal-content">
                        <div class="modal-header teal">
                            <div class="modal-title springWood h5-responsive font-weight-bold"
                                style="font-size: 0.875rem">Egg Sales Remark
                                <div class="spinner-border spinner-border-sm remark-spinner"></div>
                            </div>
                            <a href="#" class="close white-text font-small" data-dismiss="modal">&times;</a>
                        </div>
                        <div class="modal-body">
                            <span class="teal-text font-small">
                                Purchase by <span id="remarkCustomer"></span>, with id <span class="red-text"> ccf-<span id="remarkTextId"></span> </span>, on <span id="remarkDate"></span>
                            </span>

                                <form action="" method="post" class="remarkForm">
                                    {{ form.csrf_token }}
                                    <input type="hidden" name="check" value="remark-update">
                                    <input type="hidden" name="remark-id" id="remarkId">

                                    <div class="form-group mt-2">
                                        <span class="blue-grey-text font-small">Remark</span>

                                        <textarea name="remark-detail" id="remarkDetail" style="height: 7.5rem;" class="form-control font-small" placeholder="Enter Remark Here.."></textarea>
                                    </div>
                                    
                                    <!-- Update -->
                                    <button class="btn btn-sm teal white-text float-right" id="submitButton">UPDATE <i class="fas fa-paper-plane"></i> </button>
                                </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Show Remark Modal -->


<!-- Show Cost Info -->
<div class="container">
    <div class="row">
        <div class="col-md-10 offset-md-2">
            <div class="modal fade top" id="showCostInfo" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
                aria-hidden="true" data-backdrop="true">
                <div class="modal-dialog modal-top modal-notify" role="document">
                    <div class="modal-content">
                        <div class="modal-header teal">
                            <div class="modal-title springWood h5-responsive"
                                style="font-size: 0.875rem">Egg Sales Cost Details
                               <div class="spinner-border spinner-border-sm costupdate-spinner"></div>
                            </div>
                            <a href="#" class="close white-text font-small" data-dismiss="modal">&times;</a>
                        </div>
                        <div class="modal-body">
                            <span class="teal-text font-small">
                                Cost details for <span id="costCustomer"></span>, with id <span class="red-text"> ccf-<span id="costTextId"></span></span>, on <span id="costDate"></span>
                            </span>
                            <div class="font-small blue-grey-text mt-2">Total cost <i class="fas fa-arrow-right"></i> &#8358;<span id="totalCost"></span> </span> </div>

                                <form action="" method="post" class="costForm">
                                    {{ form.csrf_token }}
                                    <input type="hidden" name="check" value="cost-update">
                                    <input type="hidden" name="cost-id" id="costId">

                                    <div class="d-flex justify-content-between mt-3">
                                            <!-- Size -->
                                        <div class="form-group">
                                            <span class="font-small blue-grey-text">Egg Size</span>
                                            <select name="cost-eggsize" id="costSize" class="custom-select font-small u-size" required>
                                                <option value="" selected disabled>-- Select Size --</option>
                                                <option value="Pullet">Pullet</option>
                                                <option value="Small">Small</option>
                                                <option value="Medium">Medium</option>
                                                <option value="Big">Big</option>
                                            </select>
                                        </div>

                                        <!-- Cost -->
                                        <div class="form-group">
                                            <span class="font-small blue-grey-text">Egg Cost</span> 
                                            <div class="spinner-border spinner-border-sm u-cost-spinner"></div>
                                            <input type="number" name="cost-eggcost" id="costCost" step="0.01" class="form-control font-small u-cost" required value=0>
                                        </div>
            
                                        </div>
    
                                        <!-- Pen Allocation -->
                                        <div>
                                            <span class="teal-text font-small help-block">Egg Allocation across pens</span>
                                        </div>
    
                                        <div class="form-group mt-1">
                                            <span class="font-small blue-grey-text">Allocation Details</span>
                                            <textarea name="cost-pen-allocation" id="costAllocation" class="form-control font-small" style="height:50px" placeholder="E.g Pen 1(250), Pen 2(500)"></textarea>
                                        </div>
                                    
                                    <!-- Update -->
                                    <button class="btn btn-sm teal white-text float-right" id="submitButton">UPDATE <i class="fas fa-paper-plane"></i> </button>
                                </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Show Cost Info -->


<!-- Show Payment Info -->
<div class="container">
    <div class="row">
        <div class="col-md-10 offset-md-2">
            <div class="modal fade top" id="showPaymentInfo" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
                aria-hidden="true" data-backdrop="true">
                <div class="modal-dialog modal-top modal-notify" role="document">
                    <div class="modal-content">
                        <div class="modal-header teal">
                            <div class="modal-title springWood h5-responsive"
                                style="font-size: 0.875rem">Egg Sales Payment Details
                                <div class="spinner-border spinner-border-sm payment-spinner"></div>
                            </div>
                            <a href="#" class="close white-text font-small" data-dismiss="modal">&times;</a>
                        </div>
                        <div class="modal-body">
                            <span class="teal-text font-small">Payment details for <span id="paymentCustomer"></span>, with id <span class="red-text"> ccf-<span id="paymentTextId"></span></span>, on <span id="paymentDate"></span>

                                <form action="" method="post" class="costForm">
                                    {{ form.csrf_token }}
                                    <input type="hidden" name="check" value="payment-details">
                                    <input type="hidden" name="payment-id" id="paymentId">

                                    <!-- Bank -->
                                        <div class="form-group mt-2">
                                            <span class="blue-grey-text font-small">Bank</span>
                                            <input type="number" name="bank-payment" id="paymentBank" class="form-control font-small" step="0.01" required placeholder="Enter amount paid to bank" value="0">
                                        </div>
    
                                        <!-- Cash -->
                                        <div class="form-group">
                                            <span class="blue-grey-text font-small">Cash</span>
                                            <input type="number" name="cash-payment" id="paymentCash" class="form-control font-small" step="0.01" required placeholder="Enter total cash paid" value="0">
                                        </div>
                                    
                                        <!-- Debit -->
                                        <div class="form-group">
                                            <span class="blue-grey-text font-small">Debit</span>
                                            <input type="number" name="debit-balance" id="paymentDebit" class="form-control font-small" step="0.01" required placeholder="Enter total debit balance" value="0">
                                        </div>

                                            <!-- Credit -->
                                        <div class="form-group">
                                            <span class="blue-grey-text font-small">Credit</span>
                                            <input type="number" name="credit-balance" id="paymentCredit" class="form-control font-small" step="0.01" required placeholder="Enter total credit balance" value="0">
                                        </div>
                                   
                                    <!-- Update -->
                                    <button class="btn btn-sm teal white-text float-right" id="submitButton">UPDATE <i class="fas fa-paper-plane"></i> </button>
                                </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Show Payment Info -->


<!-- Edit Customer -->
<div class="container">
    <div class="row">
        <div class="col-md-10 offset-md-2">
            <div class="modal fade top" id="editSales" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
                aria-hidden="true" data-backdrop="true">
                <div class="modal-dialog modal-top modal-notify" role="document">
                    <div class="modal-content">
                        <div class="modal-header teal">
                            <div class="modal-title springWood h5-responsive"
                                style="font-size: 0.875rem">Cusomer Details &nbsp;
                                <div class="spinner-border spinner-border-sm sales-update-spinner"></div>
                            </div>
                            <a href="#" class="close white-text font-small" data-dismiss="modal">&times;</a>
                        </div>
                        <div class="modal-body">
                            <span class="help-block font-small teal-text">Update details of
                                Customer below!
                            </span>

                            <form action="" method="POST" class="mt-2 costForm">
                                {{ form.csrf_token }}
                                <input type="hidden" name="check" value="update_egg_sales">
                                <input type="hidden" name="update-sales-id" id="updateSalesId">

                                <!-- Date -->
                                <div class="form-group">
                                    <span class="blue-grey-text font-small">Date</span>
                                    <input type="date" name="update-sales-date" id="updateSalesDate" class="form-control font-small" required value={{ date.strftime('%Y-%m-%d') }}>
                                </div>

                                <!--Customers -->
                                <div class="form-group">
                                    <span class="blue-grey-text font-small">Customer</span>
                                    <select name="update-sales-customer-name" id="updateSalesCustomer" class="custom-select font-small">
                                        <option value="" disabled selected>Select Customer</option>
                                        {% if egg_customers %}
                                        {% for customer in egg_customers %}
                                        <option value="{{ customer.id }}">{{ customer.customer | wordSeparator }}</option>
                                        {% endfor %}
                                        {% else %}
                                        <option value="">-- No Customers --</option>
                                        {% endif %}
                                    </select>
                                </div>

                                <div class="d-flex justify-content-between">
                                     <!-- Quantity Paid For -->
                                    <div class="form-group">
                                        <span class="blue-grey-text font-small">Eggs Paid For</span>
                                        <input type="number" name="update-sales-paid" required class="form-control font-small" id="updateSalesPaid">
                                    </div>

                                    <!-- Quantity Issued -->
                                    <div class="form-group">
                                        <span class="blue-grey-text font-small">Eggs Issued</span>
                                        <input type="number" name="update-sales-issued" required class="form-control font-small" id="updateSalesIssued">
                                    </div>
                                </div>

                                <!-- Update -->
                                <button class="btn btn-sm teal white-text float-right" id="submitButton">UPDATE <i class="fas fa-paper-plane"></i> </button>

                            </form>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Edit Customer -->

<!-- Egg Cost Modal -->
<div class="container">
    <div class="row">
        <div class="col-md-10 offset-md-2">
            <div class="modal fade top" id="eggCostModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
                aria-hidden="true" data-backdrop="true">
                <div class="modal-dialog modal-top modal-notify" role="document">
                    <div class="modal-content">
                        <div class="modal-header teal">
                            <div class="modal-title springWood h5-responsive"
                            style="font-size: 0.875rem">Egg Cost </div>
                            <a href="#" class="close white-text font-small" data-dismiss="modal">&times;</a>
                        </div>
                        <div class="modal-body">
                            <span class="teal-text font-small">Summary of Egg cost with respect to their sizes!</span>

                                <form action="" method="post" class="remarkForm">
                                    {{ form.csrf_token }}

                                    <input type="hidden" name="check" value="update_eggcost">

                                   {% if eggcost %}
                                   {% for egg in eggcost %}
                                        <div class="form-group d-flex justify-content-center align-items-center w-100 mt-3">
                                            <span class="teal-text font-small w-25">{{ egg.sales_type }}:</span>
                                            <input type="number" name="{{ egg.sales_type }}-egg" id="{{ egg.sales_type }}CostVal" class="form-control" step="0.01" style="font-size: 0.8125rem" value="{{ egg.cost|numberFormat}}" required>
                                        </div>
                                    {% endfor %}
                                    {% endif %}

                                    <!-- Update -->
                                    <button class="btn btn-sm teal white-text float-right" id="submitButton">UPDATE <i class="fas fa-paper-plane"></i> </button>
                                </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Egg Cost Modal -->

{% endblock modal %}

{% block ajax %}
<script src="{{ url_for('static', filename='wt-js/allocation.js') }}"></script>
<script src="{{ url_for('static', filename='wt-js/egg_sales.js') }}"></script>
{% endblock ajax %}